if(typeof(FarmNS)==="undefined"){FarmNS={}}FarmNS.FBEventManager=function(){var b=function(f,g,h){FB.api("/"+f+"/invited","post",{users:g.join(",")},function(i){if(h!=null){h(i)}})};var e=function(f,h,g){FB.api("/"+f+"/attending","post",function(i){if(i){FarmNS.StatsManager.count("fb_event",g,"sendEventRSVP","success")}if(h!=null){h(i)}})};var c=function(i,h,g,j){var f={method:"feed",picture:i.media["src"],link:h.href,name:i.name,description:i.description,caption:i.caption,actions:[{name:h.text,link:h.href}]};if(g){FB.api("/me/feed","POST",f,function(k){if(j!=undefined){j(k)}})}else{FB.ui(f,function(k){if(j!=undefined){j(k)}})}};var d=function(f){FarmNS.FlashExtendedPermissionsManager.requestExtendedPerms(function(g){f(FarmNS.FlashExtendedPermissionsManager.getPermissions())},"rsvp_event",true)};var a=function(i,h){var g=new Array();for(var f in i){if(i[f]==0){g.push(f)}}if(g.length>0){FarmNS.FlashExtendedPermissionsManager.requestExtendedPerms(function(j){h(FarmNS.FlashExtendedPermissionsManager.getPermissions())},"rsvp_event",true)}else{h(i)}};return{getPermissionsFlash:function(f){var g=function(h){FarmNS.getFlash().doRegisteredCallback(f,h)};d(g)},getPermissions:function(f){d(f)},sendEventRSVPFromFlash:function(f,g){var h=null;if(g!=null){h=function(i){FarmNS.getFlash().doRegisteredCallback(g,i)}}e(f,h,"flash")},sendEventRSVP:function(f,h,g){e(f,h,g)},shareFeed:function(h,g,f,i){c(h,g,f,i)},inviteFriendsFromFlash:function(f,g,h){var i=function(j){FarmNS.getFlash().doRegisteredCallback(h,j)};b(f,g,i)}}}();