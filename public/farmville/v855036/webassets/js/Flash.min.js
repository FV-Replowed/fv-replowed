if(typeof(FarmNS)==="undefined"){FarmNS={}}if(typeof(trace)==="undefined"){var trace=function(){if(Farm.APP_TEST_MODE&&typeof(console)!="undefined"&&typeof(console.log)!="undefined"){console.log.apply(this,arguments)}}}var zid="";FarmNS.getFlash=function(){return document.getElementById("flashapp")};FarmNS.CheckChromePlugin=function(){var a="ddakejacccpjkpbjblhaiajdadpkejeb";var b=false;chrome.runtime.sendMessage(a,{event:"open"},function(c){if(c){b=c.hasExtension;safeConsoleLog("CheckChromePlugin hasChromeExtension : "+b)}FarmNS.getFlash().onCheckChromePluginResponse(b)})};FarmNS.setZid=function(a){this.zid=a};FarmNS.initW2e=function(){var a={applicationKey:"916be33d",applicationUserId:this.zid};ironRV=IronRV.getInstance(a);ironRV.addListener(IronRV.EVENTS.READY,function(){FarmNS.getFlash().oninitW2e("READY")});ironRV.addListener(IronRV.EVENTS.OPEN,function(){FarmNS.getFlash().oninitW2e("OPEN")});ironRV.addListener(IronRV.EVENTS.CLOSE,function(){});ironRV.addListener(IronRV.EVENTS.NO_CAMPAIGNS,function(){FarmNS.getFlash().oninitW2e("NO_CAMPAIGNS")});ironRV.addListener(IronRV.EVENTS.COMPLETION,function(){FarmNS.getFlash().onshowW2eAd("COMPLETE")});ironRV.addListener(IronRV.EVENTS.INIT_ERROR,function(){FarmNS.getFlash().oninitW2e("ERROR")})};FarmNS.showW2eIron=function(){ironRV.show()};FarmNS.FlashExtendedPermissionsManager=function(){var d=new Array();var a=function(f){var e={publish_actions:"0",user_games_activity:"0"};FB.api("/me/permissions",function(h){if(h.hasOwnProperty("error")){}else{var g=h.data;g.map(function(i){if(i.hasOwnProperty("permission")&&i.hasOwnProperty("status")&&i.status=="granted"){e[i.permission]="1"}})}if(f!=null){f(e)}})};var b=function(j,g,f){var h="dialog";if($.browser.msie){h="popup"}if(f!==undefined&&f){var i=function(k){FB.api("/me/permissions",function(q){var m=q.data;var p={};m.map(function(s){if(s.hasOwnProperty("permission")&&s.hasOwnProperty("status")&&s.status=="granted"){p[s.permission]="granted"}});d=p;var o=true;g=g.split(",");var r=g.length;for(var n=0;n<r;n++){var l=g[n];if(!p.hasOwnProperty(l)||p[l]!="granted"){o=false;break}}if(o){j(k,true)}else{j(k,false)}})};if(FarmNS.DIALOG_GDP_EXPERIMENT_VARIANT!==undefined&&FarmNS.DIALOG_GDP_EXPERIMENT_VARIANT>1){var e;if(FarmNS.DIALOG_GDP_EXPERIMENT_VARIANT===2){e="iframe"}FB.ui({method:"permissions.request",perms:g,display:e},i)}else{FB.login(i,{scope:g})}}else{FB.ui({method:"permissions.request",perms:g,display:"popup"},function(k){if(k.perms!=null&&isSetProperSubset(g.split(","),k.perms.split(","))){j(k)}})}};var c=function(){FB.api("/me/permissions",function(e){var h=false;var g=e.data;for(var f=0;f<g.length;++f){if(g[f]["permission"]=="user_friends"&&g[f]["status"]=="granted"){h=true;break}}FarmNS.getFlash().onFriendsDataLoaded(h)})};return{getPermissions:function(){return d},refreshExtendedPermsFlash:function(e){var f=function(g){FarmNS.getFlash().doRegisteredCallback(e,g)};a(f)},requestExtendedPermsFlash:function(g,f,e){var h=function(j,i){if(e!==undefined&&e){FarmNS.getFlash().doRegisteredCallback(g,j,i)}else{FarmNS.getFlash().doRegisteredCallback(g,j)}};b(h,f,e)},requestExtendedPerms:function(g,f,e){b(g,f,e)},checkFriendsPermissionFlash:function(){c()}}}();FarmNS.PaymentManager=function(){var a=function(h,g,k,i,j,f,e,d){this.gameId=Farm.ZLIVE_GAME_ID;this.snId=1;this.clientId=1;this.uid=h;this.grantCode=g;this.quantity=k;this.ref=i?i:"";this.callbackId=j;this.overrideTitle=f;this.overrideDescription=e;this.overrideImage=d};var c=function(d){var i=function(j){showFlash();FarmNS.getFlash().doRegisteredCallback(d.callbackId,j)};var h;if(FarmNS.IFRAME_MANAGER_OBJ===undefined||FarmNS.IFRAME_MANAGER_OBJ===null){FarmNS.IFRAME_MANAGER_OBJ=FarmNS.IframeManager()}h=FarmNS.IFRAME_MANAGER_OBJ;var f=Math.round(new Date().getTime()/1000);var g=h.getMessageType("low_cash_add_to_cart");var e=h.getLastTimestampKey(g);h.sendMessageToParent("low_cash_add_to_cart=1&gameId="+d.gameId+"&snId="+d.snId+"&uid="+d.uid+"&clientId="+d.clientId+"&grantCode="+d.grantCode+"&amount="+d.quantity+"&ref="+d.ref+"&appId="+Farm.FB_APP_ID+"&callbackId="+d.callbackId+"&overrideTitle="+encodeURIComponent(d.overrideTitle)+"&overrideDescription="+encodeURIComponent(d.overrideDescription)+"&overrideImage="+encodeURIComponent(d.overrideImage)+"&"+e+"="+f)};var b=function(d){if(d){if(d.success){hideFlash()}else{}}};return{addToCart:function(h,g,k,i,j,f,e,d){c(new a(h,g,k,i,j,f,e,d))}}}();FarmNS.FlashUpgrade=function(){return{showInstaller:function(c,d){var f={allowScriptAccess:"always",wmode:"opaque",allowFullScreen:"true"};var b={id:"flashUpgradeContainer",name:"flashUpgradeContainer",data:"webassets/js/swfobject_2_2/expressInstall.swf",width:"214",height:"135"};hideFlash();var e=document.getElementById("flashUpgradePlaceHolder");function a(){showFlash();if(d===false){var g=document.getElementById("flashapp");if(g!==undefined&&c!==undefined){g.doRegisteredCallback(c)}}if(FarmNS.StatsManager!==undefined){FarmNS.StatsManager.count("dialog","flash_upgrade_promo_installer","no")}e.innerHTML=""}e.innerHTML="<div id='flashUpgradeContainer' style='z-index: 10000; position:absolute; top: 200px; left: 500px; width: 140px; height: 150px;'><div id='flashUpgradeAlt'></div></div>";swfobject.showExpressInstall(b,f,"flashUpgradeAlt",a)}}}();