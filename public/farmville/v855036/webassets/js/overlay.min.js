function FarmOverlay(){}FarmOverlay.prototype={overlayOpen:false,shouldShowSkinnedRecentlyPlayedTemplate:false,overlayName:"",showGameOverlay:function(c,f,b,i){if(!this.overlayOpen){if(Farm.SN_TYPE=="fb"||((f!=null)&&(f==true))){if(c){c=ZY.PrepareURL(c);$("#overlayFrame").attr("src",c);if((b!=null)&&(b==true)){$("#overlayFrame").attr("scrolling","yes")}else{$("#overlayFrame").attr("scrolling","no")}}$("#genericOverlay").css("margin-left",$("#genericOverlay").width()*-0.5);this.setupBorderAndFrameClasses();$("#genericOverlay").show();if($("#flashapp")[0].disableAllInput){$("#flashapp")[0].disableAllInput()}hideFlash();this.overlayOpen=true}else{if(c){var a={height:580,width:730};var e="height="+a.height+",width="+a.width+",toolbar=0,scrollbars=1,status=0,resizable=1,location=0,menuBar=0";var d,g;if($.browser.msie){d=window.screenTop-120+0.5*(document.documentElement.clientHeight+120-a.height);g=window.screenLeft+0.5*(document.body.offsetWidth+20-a.width)}else{d=window.screenY+0.5*(window.outerHeight-a.height);g=window.screenX+0.5*(window.outerWidth-a.width)}if(i!=null){c=c+"&"+i}var h=window.open(c,"gameOverlay",e+",left="+g+",top="+d);h.focus();this.overlayOpen=true}}}},showGameNewWindow:function(b,d,a){var c=(d!=null)?d:730;var i=(a!=null)?a:580;var f,h;if($.browser.msie){f=window.screenTop-120+0.5*(document.documentElement.clientHeight+120-i);h=window.screenLeft+0.5*(document.body.offsetWidth+20-c)}else{f=window.screenY+0.5*(window.outerHeight-i);h=window.screenX+0.5*(window.outerWidth-c)}var g="height="+i+",width="+c+",toolbar=0,scrollbars=0,status=0,resizable=0,location=0,menuBar=0";var e=window.open(b,"gameNewWindow",g+",left="+h+",top="+f);if(!e){alert("Please disable the pop-up blocker of your browser and try again.")}else{e.focus()}},hideGameOverlay:function(a){this.overlayName="";if(Farm.SN_TYPE=="fb"||((a!=null)&&(a==true))){if($("#genericOverlay").css("display")!="none"){$("#genericOverlay").hide();if($("#flashapp")&&$("#flashapp")[0]){if($("#flashapp")[0].enableAllInput){$("#flashapp")[0].enableAllInput()}if($("#flashapp")[0].onCloseOverlay){$("#flashapp")[0].onCloseOverlay()}}showFlash()}}this.overlayOpen=false},anchorPageToGiftOverlay:function(){scrollParentToGiftOverlay()},showMusicPlayer:function(){},showGiftingInterstitialOverlay:function(c,b,a){this.showGameOverlay("gifts_send.php?action=showInOverlay&gift="+c+"&titlePrefix="+b+"&rewardKey="+a,null,true,g_iframeParams+"&fv_canvas=1")},showGiftingInterstitialOverlayWithRef:function(c,a,b){this.showGameOverlay("gifts_send.php?action=showInOverlay&ref="+b+"&gift="+c+"&titlePrefix="+a,null,true,g_iframeParams+"&fv_canvas=1")},showGiftingInterstitialOverlayWithRefSelected:function(d,b,c,e){var a="gifts_send.php?action=showInOverlay&ref="+c+"&gift="+d+"&titlePrefix="+b+"&"+g_iframeParams+"&fv_canvas=1";if(e){a+="&selectedGift="+e}this.showGameOverlay(a)},showInGameGiftingInterstitialOverlay:function(){this.showGameOverlay("gifts_send.php?action=showInOverlay&ref=gameOverlay&titlePrefix=defaultInterstitial",null,true,g_iframeParams+"&fv_canvas=1")},showFeedGiftingInterstitialOverlay:function(e,d,b,a,c){if(e&&b){this.overlayName="ItemToUserGiftTemplate"}this.showGameOverlay("gifts_send.php?action=showInOverlay&ref=FarmFeed_"+c+"&gift="+e+"&titlePrefix="+d+"&giftRecipient="+b+"&recipientName="+escape(a),null,true,g_iframeParams+"&fv_canvas=1");if(Farm.SN_TYPE=="fb"){this.anchorPageToGiftOverlay()}},showFertilizerGiftingInterstitialOverlay:function(c,b,a){this.showGameOverlay("gifts_send.php?action=showInOverlay&ref=fertilizer_thank_you&gift="+c+"&titlePrefix="+b+"&giftRecipient="+a,null,true,g_iframeParams+"&fv_canvas=1")},showSocialPlumbingGiftRequestOverlay:function(e,c,b,a,d,f){this.showGameOverlay("gifts_send.php?action=showInOverlay&ref="+d+"&gift="+e+"&title="+f+"&giftRecipient="+b+"&recipientName="+escape(a),null,true,g_iframeParams+"&fv_canvas=1");if(Farm.SN_TYPE=="fb"){this.anchorPageToGiftOverlay()}},showVisitBackGiftRequestOverlay:function(b,a){this.showGameOverlay("gifts_send.php?action=showInOverlay&requestTextLocalizationKey=VisitBack_ask_request_text&ref=visit_back&gift=socialplumbingmysterygift&titlePrefix=VisitBack_ask_select&giftRecipient="+b+"&recipientName="+escape(a),null,true,g_iframeParams)},showCommunityVisitOverlay:function(d,c,e,a,f,b){this.showGameOverlay("gifts_send.php?action=showInOverlay&requestTextLocalizationKey="+e+"&ref="+a+"&gift="+f+"&titlePrefix="+b+"&giftRecipient="+d+"&recipientName="+escape(c),null,true,g_iframeParams)},recentlyPlayedCallback:function(){this.overlayName="RecentlyPlayedTemplate";this.showGameOverlay("gifts_send.php?action=giftSendOverlay&view=recentlyPlayed&ref=RP_interstitial",null,true,g_iframeParams)},giftSendOverlayCallback:function(a,b){if(a=="recentlyPlayed"){this.overlayName="RecentlyPlayedTemplate"}this.showGameOverlay("gifts_send.php?action=giftSendOverlay&view="+a+"&ref="+b,null,true,g_iframeParams+"&fv_canvas=1")},inviteNeighborOverlay:function(b,c,a){this.showGameOverlay("invite.php?ref="+c+"&creative="+a+"&view="+b,null,true,g_iframeParams)},showSurveyOverlay:function(a){if(a.match(/surveyURL=/)){this.styleOverlayForSurvey();this.showGameOverlay(a,true)}},hideSurveyOverlay:function(){this.hideGameOverlay(true);this.resetOverlayStyles();$("#overlayFrame").attr("src","")},styleOverlayForSurvey:function(){$("#genericOverlay").css("margin-top",60);$("#overlayBorder").removeClass("defaultBorder");$("#overlayFrame").removeClass("defaultFrame").addClass("surveyFrame")},resetOverlayStyles:function(){$("#genericOverlay").css("margin-top",0);$("#overlayBorder").addClass("defaultBorder");$("#overlayFrame").removeClass().addClass("defaultFrame")},setShowSkinnedRecentlyPlayedTemplate:function(a){this.shouldShowSkinnedRecentlyPlayedTemplate=a},showSuggestionHubOverlay:function(){this.overlayName="SuggestionHub";this.showGameOverlay("suggestionhub.php?_force_iframe=1&fv_canvas=1&ref=overlay",null,false,g_iframeParams)},showStarterPackOverlay:function(){this.showGameOverlay("starter_pack.php?ref=fv_pack_interstitial",null,false,g_iframeParams)},setupBorderAndFrameClasses:function(){$("#overlayBorder").removeClass().addClass("defaultBorder");$("#overlayFrame").removeClass().addClass("defaultFrame");if(this.shouldShowSkinnedRecentlyPlayedTemplate&&(this.overlayName=="RecentlyPlayedTemplate")){$("#overlayBorder").removeClass().addClass("skinnedGiftingOverlayBorder");$("#overlayFrame").removeClass().addClass("skinnedGiftingOverlayFrame")}else{if(this.overlayName=="SuggestionHub"){$("#overlayBorder").removeClass().addClass("suggestionHubOverlayBorder");$("#overlayFrame").removeClass().addClass("suggestionHubOverlayFrame")}}},showFBLikeOverlay:function(e,b,d,c,a){if(!this.overlayOpen){iframeUrl="http://www.facebook.com/plugins/like.php?href="+b+"&amp;ref="+d+"&amp;layout=button_count&amp;show_faces=true&amp;width=450&amp;action=like&amp;colorscheme=dark&amp;height=80";if(b){$("#fbLikeCoreFrame").attr("src",iframeUrl)}if(e){$("#like_widget_title").text(e)}else{$("#like_widget_title").text("")}$("#fb_close_btn").val(c);$("#fb_visit_btn").val(a);$("#fbLikeOverlay").show();$("#flashapp")[0].disableAllInput();this.overlayOpen=true}$("#fb_visit_btn").bind("click",{scope:this,likeUrl:b,reference:d},this.launchFBLikeUrl);$("#fb_close_btn").bind("click",{scope:this,element:$("#fbLikeCoreFrame"),fbCloseBtn:$("#fb_close_btn"),fbVisitBtn:$("#fb_visit_btn"),fbCloseIcon:$("#dialog_close_icon")},this.hideFBLikeOverlay);$("#dialog_close_icon").bind("click",{scope:this,element:$("#fbLikeCoreFrame"),fbCloseBtn:$("#fb_close_btn"),fbVisitBtn:$("#fb_visit_btn"),fbCloseIcon:$("#dialog_close_icon")},this.hideFBLikeOverlay)},hideFBLikeOverlay:function(b,a){if($("#fbLikeOverlay").css("display")!="none"){$("#fbLikeOverlay").hide();if($("#flashapp")&&$("#flashapp")[0]&&$("#flashapp")[0].enableAllInput){$("#flashapp")[0].enableAllInput()}}b.data.scope.overlayOpen=false;b.data.scope.resetOverlayStyles();b.data.element.attr("src","");b.data.fbCloseBtn.unbind();b.data.fbVisitBtn.unbind();b.data.fbCloseIcon.unbind()},launchFBLikeUrl:function(b,a){ZStatsCountSample(100,"Zyngage","fb_like_button","visit_click",b.data.reference,"","",1);window.open(b.data.likeUrl)}};